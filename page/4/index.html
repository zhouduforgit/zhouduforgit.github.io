<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>周大嘟 - -isGood</title><meta name="author" content="zdd"><meta name="copyright" content="zdd"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="勇敢牛牛不怕困难~~">
<meta property="og:type" content="website">
<meta property="og:title" content="周大嘟">
<meta property="og:url" content="https://zddisgood.top/page/4/index.html">
<meta property="og:site_name" content="周大嘟">
<meta property="og:description" content="勇敢牛牛不怕困难~~">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://z3.ax1x.com/2021/08/14/fy35F0.jpg">
<meta property="article:author" content="zdd">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://z3.ax1x.com/2021/08/14/fy35F0.jpg"><link rel="shortcut icon" href="/img/chonglang.jpg"><link rel="canonical" href="https://zddisgood.top/page/4/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="code-6GlELCTPet"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '周大嘟',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-06-21 17:10:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">#toggle-sidebar {bottom: 80px}</style><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/font_2736027_qkbfa2ismhq.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/font_3158372_w9cdht72zmn.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://z3.ax1x.com/2021/08/14/fy35F0.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-calendar"></i><span> 流年记</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-tubiao-"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw iconfont icon-liuyanmoban"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-guanyubeifen2"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://z3.ax1x.com/2021/08/08/fQUEXd.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">周大嘟</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-calendar"></i><span> 流年记</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-tubiao-"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw iconfont icon-liuyanmoban"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-guanyubeifen2"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">周大嘟</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/zhouduforgit" target="_blank" title="github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="mailto:zhoudu18164250089@163.com" target="_blank" title="邮箱"><i class="iconfont icon-youxiang"></i></a><a class="social-icon" href="https://space.bilibili.com/328545237" target="_blank" title="B站"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/%E6%97%A5%E5%B8%B8/%E6%8A%96%E9%9F%B3quiCode.jpg" target="_blank" title="抖音"><i class="iconfont icon-douyin"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/article/fb37dc6d.html" title="解忧杂货店-答案在牛奶箱里"><img class="post_bg" src="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/image-20211114221608178.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解忧杂货店-答案在牛奶箱里"></a></div><div class="recent-post-info"><a class="article-title" href="/article/fb37dc6d.html" title="解忧杂货店-答案在牛奶箱里">解忧杂货店-答案在牛奶箱里</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-14T14:12:15.000Z" title="发表于 2021-11-14 22:12:15">2021-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AF%BB%E5%90%8E%E6%84%9F/">读后感</a></span></div><div class="content">故事描述​	答案在牛奶箱里是第一章，主要讲述三个人在一家很老旧的杂货店里和过去时空的人互相写信对话的故事。翔太、幸平、敦也三个半夜做坏事偷车子，车子忽然报废了就躲进附近无人的老旧的杂货里等待第二天到来混进人群。他们的这杂货店的牛奶箱里突然收到一个叫月兔的姑娘的来信，他们觉得很奇怪三更半夜怎么会有人写信给杂货店呢？打开信一看，上面写着【一个叫月兔的女运动员正在全力准备奥运会的训练，和她的男朋友是同样的运动员一起准备训练，男友突然身患癌症不能训练，她想放弃训练照顾她男友，然而她男友坚决让他坚持训练带着两个人的梦想奋斗下去，她陷入了纠结和痛苦就写信息请教杂货店老板】。这时敦也从沾满灰尘的杂志中看到，这家杂货店在四十年前就是专门解决人们的烦恼的，顿时他们意识到他们收到过去时空的人的烦恼咨询。他们觉得这种事情一辈子很难碰到并且感觉倾听别人的烦恼是件很幸运的事情就抱着疑惑和好奇的心情给月兔回了信说【可以带着男朋友一起训练】。不料回信投进牛奶箱很快就有回信，月兔说【这不现实，她男朋友卧病在床而且医院旁边也没有训练场地，并希望有个像动画里的可视电话就好了】。他们就知道了在月兔那个时代没有手机不能视频聊 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/article/c677dcf2.html" title="mybatis相关报错"><img class="post_bg" src="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/image-20211114165144666.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mybatis相关报错"></a></div><div class="recent-post-info"><a class="article-title" href="/article/c677dcf2.html" title="mybatis相关报错">mybatis相关报错</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-14T07:31:53.000Z" title="发表于 2021-11-14 15:31:53">2021-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">踩坑记录</a></span></div><div class="content">报错场景一​	我写的是一个简单的购物商城页面，当某个用户成功登陆以后，点击某个商品的【商品】详情按钮，就会出现500错误，具体信息如下

​	大概意思是原因：java.sql.SQLDataException:不支持从LONG到java.sql.Timestamp的转换不支持从LONG到java.sql.Timestamp的转换；嵌套异常为java.sql.SQLDataException：不支持从LONG到java.sql.Timestamp的转换。是buy_count这个字段转换错误。
过程如下












经过一番检查发现并不是sql语句写错了，于是我把报错信息百度一下，发现而是我的GoodsCart实体类没有加无参构造，具体原因我不知道，这是第一次碰到这情况。


解决方法​	可以在GoodsCart实体类里加上无参构造，或者修改SQL语句中，gc.buy_count和gc.add_date的位置，别问我为什么，我也不知道。参考帖子上说【一旦我们手动添加了带参数的构造方法，编译器就不会给我们添加默认的无参构造方法。导致mybatis无法new这个实体类。也就无法做映 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/article/94163d5c.html" title="Tomcat源码部署运行"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Tomcat源码部署运行"></a></div><div class="recent-post-info"><a class="article-title" href="/article/94163d5c.html" title="Tomcat源码部署运行">Tomcat源码部署运行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-19T05:35:29.000Z" title="发表于 2021-10-19 13:35:29">2021-10-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Tomcat/">Tomcat</a></span></div><div class="content">Tomcat简介​	按我的理解Tomcat是一个容器，存储一些jsp，servlet类。同时负责客户端发送的http请求转发到servlet容器（jsp的本质就是servlet，servlet类可以理解成为controller层的Java类）。
Tomcat的安装​	进入官网。如tomcat8.5.72，点击64位的window压缩包下载64-bit Windows zip。连接如下https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.72/bin/apache-tomcat-8.5.72-windows-x64.zip，然后解压即可。也可以下载源码https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.72/src/apache-tomcat-8.5.72-src.zip
Tomcat服务的启动
1.可以直接点击startup.bat。【在你的tomcat目录\bin】
2.也可以把tomcat源码下载下来，导入maven工程，配置启动类运行。

​	下面我使用第二种方式启动tomcat容器，我的文件结构是如图 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/article/a2ffc0e3.html" title="resetPwdByMsgAndEmail"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="resetPwdByMsgAndEmail"></a></div><div class="recent-post-info"><a class="article-title" href="/article/a2ffc0e3.html" title="resetPwdByMsgAndEmail">resetPwdByMsgAndEmail</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-05T08:33:40.000Z" title="发表于 2021-10-05 16:33:40">2021-10-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/">工作总结</a></span></div><div class="content">任务描述通过发送短信和邮箱重置密码


场景描述​	有一天领导给我布置了一个任务，要我完成一个功能“通过发送短信和邮箱重置密码”。前端页面css已经写好但是HTML代码在蓝湖上面需要我自己拼成html页面。但是发送短信、邮箱按钮失效，刷新图形验证码失效，只给我一个页面的空壳。页面分成三个阶段，

第一个是选择重置密码方式页面，
第二个是通过发送邮箱、发送短信重置密码的页面，
第三个是重置密码页面。如图所示。其中黄色的是按钮，黑色框的是填写的内容

















需求分析​	因为前端只给我了一个网站的空壳，大部分事情是我一个做【页面的跳转，短信、邮箱验证码的发送，密码一致性判断】，首先给上图4个页面取一个简单易懂的名字。再规定页面上每一个按钮发送的url。这样整体的流程框架就出来了。如下图

发送手机验证码按钮分析​	点击“发送手机验证码”按钮页面不会跳转到下个页面。此时若发送成功这按钮会变成倒计时状态，若发送手机验证码失败就在验证码输入框下提示具体原因。要给“获取手机验证码”按钮一个点击事件onclick=&quot;sendResetPwdMsg&quot;俩控制验 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/article/49cb1f93.html" title="13-Shiro的rememberMe"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="13-Shiro的rememberMe"></a></div><div class="recent-post-info"><a class="article-title" href="/article/49cb1f93.html" title="13-Shiro的rememberMe">13-Shiro的rememberMe</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-14T03:55:51.000Z" title="发表于 2021-09-14 11:55:51">2021-09-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">权限分类


用户访问页面分为3中级别




未认证可以访问的页面
比如登录、注册页面


“记住我”（曾登录过）访问的页面
index.html


以认证可访问的页面
转账页面等


记住密码的流程​	第一次登录login.html页面时，点击“登录”会把用户的username和password存入cookie中，第二次登录login.html页面时输入username后，会调用js方法获取cookie里的密码并自动把密码填写到input标签里。
shiro的“记住我”流程​	现在上述功能交给shiro的SecurityManager实现，只需要告诉shiro把UsernamePasswordToekn类型token传入SecurityManager中，就会自动检测。
流程示意图​	
rememberMe实现​	在ShiroConfig中设置过滤器的权限，让访问index.html页面是以登录或曾登录用户的才能访问。设置过滤filterMap规则。
1filterMap.put(&quot;/index.html&quot;,&quot;user&quot;);

​	并且设置c ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/article/1af96f8f.html" title="12-Shiro的缓存管理"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="12-Shiro的缓存管理"></a></div><div class="recent-post-info"><a class="article-title" href="/article/1af96f8f.html" title="12-Shiro的缓存管理">12-Shiro的缓存管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-12T08:21:45.000Z" title="发表于 2021-09-12 16:21:45">2021-09-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">场景描述​	现在再添加量Shiro标签后，以HTML形式进行权限管理。是否每一次点击页面的某个菜单，都要经过MyRealm的授权方法，从数据库里查数据。在MyRealm的doGetAuthorizationInfo打印一行sout（“———-查询用户权限—-”）；看看登录成功后，引入index.html这句话打印了几次。现在用户zhoudu登录。
检测结果



​	由上图所示，在初始index.html时一共16个shiro标签，所以执行了16次授权方法。并且每次点击一个菜单又会调用授权方法。如点击“客户查询”，虽然没有用shiro标签修饰但是加上了权限判断的注解，也会打印”———-查询用户权限—-&#x3D;&#x3D;&#x3D;”)。如下图。

​	说明无论是初始化，还是点击某个菜单都会查询数据库的数据，而且这些查询是同样的重复的操作，当用户很多时用户点击量很大时会频繁的访问数据库，非常消耗数据库的性能，所以在初始化界面时把数据从数据库里读出来存入缓存中，下次点击某个菜单直接从缓存里寻找，这样性能提高很多。
使用缓存引入依赖​	首页springboot要支持缓存，在引入第三方缓 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/article/2098328f.html" title="11-Shiro的授权管理"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11-Shiro的授权管理"></a></div><div class="recent-post-info"><a class="article-title" href="/article/2098328f.html" title="11-Shiro的授权管理">11-Shiro的授权管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-11T10:20:12.000Z" title="发表于 2021-09-11 18:20:12">2021-09-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">权限管理的方式HTML页面限制​	方式有两种，第一种是基于HTML页面展示的形式。在登录时查询到用户权限结合shiro标签库展示，展示出该用户所有的权限菜单。此方法有缺点，比如wangtaiwen用户是HR职务只有修改、查询客户这两个权限，在登录页面只能看到这两个菜单，但是ta无意间知道了“入库”权限的url，只要wangtaiwen是登录状态可以不用点击菜单直接输入url—&gt;”localhost:8080&#x2F;repoAdd.html”，就能越级访问。所以要在ShiroConfig中加入限制条件。只有改用户有sys:repo:save时才能访问“入库”
1filterMap.put(&quot;/repoAdd.html&quot;,&quot;perms[sys:repo:save]&quot;);

注解限制​	此方式不依赖shiro标签，在进入index.html页面后不管用户身份是什么，展示全部的菜单。但是用户只能点击ta有权限的那些菜单，其它菜单看得见但是点不进去。这需要在每个菜单的a标签的href&#x3D;url对应的controller方法上加上注解，说明 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/article/ccdb3234.html" title="10-Shiro的密码加密加盐"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="10-Shiro的密码加密加盐"></a></div><div class="recent-post-info"><a class="article-title" href="/article/ccdb3234.html" title="10-Shiro的密码加密加盐">10-Shiro的密码加密加盐</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-11T02:46:42.000Z" title="发表于 2021-09-11 10:46:42">2021-09-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">密码加密​	一般加密的方式有2种，一种是base64加密是可以双向破解的。另一种的md5码加密只能由明文转成密文，不能有密文转成明文。这种单向转换更加安全，即使黑客进入数据库了无法根据密文密码登录。特别注意在注册时密码加密规则是什么就在shiro认证是告诉MyRealm密码匹配规则。myRealm最终匹配的是密文（先把input的密码转换成密文再和数据库的密文比对）代码如下
123456789101112131415在ShiroConfig类中@Bean   public HashedCredentialsMatcher getHashedCredentialsMatcher ()&#123;    	// 设置密码匹配规则       HashedCredentialsMatcher matcher = new HashedCredentialsMatcher();       matcher.setHashAlgorithmName(&quot;md5&quot;);       matcher.setHashIterations(1);       return matcher; ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/article/dafe26a3.html" title="9-引入layui实现Shiro后台管理页面"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="9-引入layui实现Shiro后台管理页面"></a></div><div class="recent-post-info"><a class="article-title" href="/article/dafe26a3.html" title="9-引入layui实现Shiro后台管理页面">9-引入layui实现Shiro后台管理页面</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-10T03:08:37.000Z" title="发表于 2021-09-10 11:08:37">2021-09-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">引入layui​	因为自己写的index.html页面简单难看，就要引入现成的框架Layui，可以去官网下载也可以引入SDN。把下载好的layui文件放入static中。



引入方式



本地引入


在head标签里 添加《link rel&#x3D;”stylesheet” href&#x3D;”layui&#x2F;css&#x2F;layui.css》


在底部 body的上方添加《script src&#x3D;”layui&#x2F;layui.js”&gt;&lt;&#x2F;script》


SDN引入


在head标签里 添加《link rel&#x3D;”stylesheet” href&#x3D;”&#x2F;&#x2F;unpkg.com&#x2F;&#x6c;&#x61;&#x79;&#117;&#105;&#64;&#50;&#46;&#x36;&#x2e;&#x38;&#x2F;dist&#x2F;css&#x2F;layui.css”》


在底部 body的上方添加《script src&#x3D;”&#x2F;&#x2F;unpkg.co ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/article/7640841f.html" title="8-自定义Realm的配置"><img class="post_bg" src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="8-自定义Realm的配置"></a></div><div class="recent-post-info"><a class="article-title" href="/article/7640841f.html" title="8-自定义Realm的配置">8-自定义Realm的配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-09T08:41:31.000Z" title="发表于 2021-09-09 16:41:31">2021-09-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/">shiro权限框架</a></span></div><div class="content">改变Realm来源​	在ShiroConfig类中之前是连接JdbcRealm，JdbcRealm自动封装了认证和授权的SQL，而自定义realm到自己写，并且安全数据源要换成myRealm。
1234567891011@Beanpublic MyRealm getMyRealm()&#123;    MyRealm myRealm = new MyRealm();    return myRealm;&#125; @Beanpublic DefaultWebSecurityManager getDefaultWebSecurityManager(MyRealm myRealm) &#123;    DefaultWebSecurityManager defaultWebSecurityManager = new DefaultWebSecurityManager();    defaultWebSecurityManager.setRealm(myRealm);    return defaultWebSecurityManager;&#125;

配置MyRealm​	myReal ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/5/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://z3.ax1x.com/2021/08/14/fy35F0.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zdd</div><div class="author-info__description">勇敢牛牛不怕困难~~</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhouduforgit"><i class="fab fa-github"></i><span>星空仰望着银河的自由</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/zhouduforgit" target="_blank" title="github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="mailto:zhoudu18164250089@163.com" target="_blank" title="邮箱"><i class="iconfont icon-youxiang"></i></a><a class="social-icon" href="https://space.bilibili.com/328545237" target="_blank" title="B站"><i class="iconfont icon-bilibili"></i></a><a class="social-icon" href="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/%E6%97%A5%E5%B8%B8/%E6%8A%96%E9%9F%B3quiCode.jpg" target="_blank" title="抖音"><i class="iconfont icon-douyin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">随便看看呗O(∩_∩)O~</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/article/4a17b156.html" title="Hello World"><img src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/article/4a17b156.html" title="Hello World">Hello World</a><time datetime="2022-06-21T08:26:49.264Z" title="发表于 2022-06-21 16:26:49">2022-06-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/90ef2d9d.html" title="git的push失败"><img src="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/git/gittubiao.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git的push失败"/></a><div class="content"><a class="title" href="/article/90ef2d9d.html" title="git的push失败">git的push失败</a><time datetime="2022-04-07T04:01:40.000Z" title="发表于 2022-04-07 12:01:40">2022-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/e36836d7.html" title="玩象棋的那些事"><img src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="玩象棋的那些事"/></a><div class="content"><a class="title" href="/article/e36836d7.html" title="玩象棋的那些事">玩象棋的那些事</a><time datetime="2022-04-06T08:25:55.000Z" title="发表于 2022-04-06 16:25:55">2022-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/e26c192c.html" title="百度收录-SEO"><img src="/./img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="百度收录-SEO"/></a><div class="content"><a class="title" href="/article/e26c192c.html" title="百度收录-SEO">百度收录-SEO</a><time datetime="2022-04-03T03:07:37.000Z" title="发表于 2022-04-03 11:07:37">2022-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/29446627.html" title="ssl生成和https的配置"><img src="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/nginx%E7%9B%B8%E5%85%B3/image-20220321115312240.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ssl生成和https的配置"/></a><div class="content"><a class="title" href="/article/29446627.html" title="ssl生成和https的配置">ssl生成和https的配置</a><time datetime="2022-04-02T02:20:26.000Z" title="发表于 2022-04-02 10:20:26">2022-04-02</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Tomcat/"><span class="card-category-list-name">Tomcat</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/shiro%E6%9D%83%E9%99%90%E6%A1%86%E6%9E%B6/"><span class="card-category-list-name">shiro权限框架</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/"><span class="card-category-list-name">工作总结</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%B8%B8/"><span class="card-category-list-name">日常</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="card-category-list-name">算法与数据结构</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"><span class="card-category-list-name">网络协议</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%A7%82%E5%90%8E%E6%84%9F/"><span class="card-category-list-name">观后感</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AF%BB%E5%90%8E%E6%84%9F/"><span class="card-category-list-name">读后感</span><span class="card-category-list-count">7</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Nginx/" style="font-size: 1.42em; color: #99a6b7">Nginx</a> <a href="/tags/git/" style="font-size: 1.18em; color: #999ca1">git</a> <a href="/tags/linux/" style="font-size: 1.1em; color: #999">linux</a> <a href="/tags/mybatis/" style="font-size: 1.1em; color: #999">mybatis</a> <a href="/tags/seo/" style="font-size: 1.1em; color: #999">seo</a> <a href="/tags/shiro/" style="font-size: 1.5em; color: #99a9bf">shiro</a> <a href="/tags/web%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.18em; color: #999ca1">web应用服务器</a> <a href="/tags/%E5%86%85%E5%8A%9F%E5%BF%83%E6%B3%95/" style="font-size: 1.26em; color: #999fa8">内功心法</a> <a href="/tags/%E5%88%9D%E6%9D%A5%E4%B9%8D%E5%88%B0/" style="font-size: 1.1em; color: #999">初来乍到</a> <a href="/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 1.18em; color: #999ca1">日常</a> <a href="/tags/%E7%A9%B7%E7%88%B8%E7%88%B8%E5%92%8C%E5%AF%8C%E7%88%B8%E7%88%B8/" style="font-size: 1.18em; color: #999ca1">穷爸爸和富爸爸</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/" style="font-size: 1.1em; color: #999">网络设备</a> <a href="/tags/%E8%A7%A3%E5%BF%A7%E6%9D%82%E8%B4%A7%E5%BA%97/" style="font-size: 1.34em; color: #99a3b0">解忧杂货店</a> <a href="/tags/%E8%BF%90%E8%90%A5/" style="font-size: 1.1em; color: #999">运营</a> <a href="/tags/%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81/" style="font-size: 1.1em; color: #999">重置密码</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">51</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-10-22T00:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">38.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-06-21T09:10:30.090Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By zdd</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div><a id="footer-wrap" onclick="window.open('https://beian.miit.gov.cn')">鄂ICP备2021017359号-1</a></div> <div><img src="https://zdblogimg.oss-cn-hangzhou.aliyuncs.com/beiantubiao.png"/><a id="footer-wrap" onclick="window.open('http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42010402001438')">鄂公网安备 42010402001438号</a></div> <div>nihaoa~,很高兴认识你~~</div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["长风破浪会有时直挂云帆济沧海~~","珍惜当下"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '长风破浪会有时直挂云帆济沧海~~'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script async src="/js/diytitle.js"></script><div class="aplayer" data-id="7868042847" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script async src="//at.alicdn.com/t/font_2264842_3izu8i5eoc2.js"></script><script async src="/js/grayscale.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>